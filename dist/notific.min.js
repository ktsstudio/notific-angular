/*! 
* notific - v0.0.1 - 2015-03-13
* https://github.com/gbiryukov/notific-angular
* Copyright (c) 2015 George Biryukov
* Licensed MIT 
*/

angular.module("notific",[]).factory("notific",["$timeout",function(a){"use strict";var b={_guid:0,_scope:{},_default:{title:"Notification",text:"",type:"default",timeout:!1},_params:{css:{body:"body",top:"notific_top",bottom:"notific_bottom",notification:"notific__alert","default":"notific__alert_info",error:"notific__alert_danger",success:"notific__alert_success",warning:"notific__alert_warning",close:"notific__close"},width:360,position:"bottom",bootstrap:!1},_types:{"default":!0,error:!0,success:!0,warning:!0},_verifyNotificationType:function(a){return this._types.hasOwnProperty(a)?a:"default"},_scrollToBottom:function(){var a=this._container[0];a.scrollTop=a.scrollHeight},_styleBootstrap:function(){this.config({css:{notification:"alert","default":"alert-info",error:"alert-danger",success:"alert-success",warning:"alert-warning",close:"close"}})},config:function(a){this._extendDeep(this._params,a),this._scope.position=this._params.position},show:function(b){this._params.bootstrap&&this._styleBootstrap();var c={};if(this._extendDeep(c,this._default,b),c.type=this._verifyNotificationType(c.type),c.id=this._guid++,this._scope.notifications.push(c),c.timeout){var d=this;a(function(){d.close(c)},c.timeout)}return c},_extendDeep:function(a){var b=this;return angular.forEach(arguments,function(c){c!==a&&angular.forEach(c,function(c,d){a[d]&&a[d].constructor&&a[d].constructor===Object?b._extendDeep(a[d],c):a[d]=c})}),a},_setContainerScope:function(a){this._scope=a,this.config({})},_setContainer:function(a){this._container=a},error:function(a){return this.show(this._extendDeep(a,{type:"error"}))},success:function(a){return this.show(this._extendDeep(a,{type:"success"}))},warning:function(a){return this.show(this._extendDeep(a,{type:"warning"}))},close:function(a){for(var b in this._scope.notifications)if(this._scope.notifications[b].id===a.id)return void this._scope.notifications.splice(b,1)}};return b}]).directive("notifications",["notific",function(a){"use strict";return{restrict:"AE",template:'<div id="notific" class="notific" ng-class="getPosition()" ng-style="getWidth()">                         <div ng-repeat="notific in notifications" ng-class="getType(notific)" on-finish-render="scroll">                             <button type="button" ng-class="getCloseClass(notific)" ng-click="dismiss(notific)">Ã—</button>                             <h4 class="notific__title">{{notific.title}}</h4>                             <p class="notific__text">{{notific.text}}</p>                         </div>                     </div>',compile:function(){var b=angular.element(document.getElementById("notific"));return function(c){c.notifications=[],c.dismiss=function(b){a.close(b)},c.getPosition=function(){return a._params.css[a._params.position]},c.getCloseClass=function(){return a._params.css.close},c.getType=function(b){return a._params.css.notification+" "+a._params.css[b.type]},c.getWidth=function(){return{width:a._params.width+"px"}},c.$on("scroll",function(){a._scrollToBottom()}),a._setContainer(b),a._setContainerScope(c)}}}}]).directive("onFinishRender",function(a){"use strict";return{restrict:"A",link:function(b,c,d){b.$last===!0&&a(function(){b.$emit(d.onFinishRender)})}}});